# Quebec Teacher Hub v4 - Environment Variables Template
# Copy this file to .env.local and replace with your actual values

# Database - Supabase connection string
DATABASE_URL="postgresql://user:password@host:port/database"

# Knowledge Base - SQLite for curriculum data
KNOWLEDGE_DB_PATH="./data/kb_index.sqlite"

# NextAuth - Generate a new secret with: openssl rand -base64 32
NEXTAUTH_SECRET="your-nextauth-secret-here"
NEXTAUTH_URL="http://localhost:3000"

# Google OAuth - Get from Google Cloud Console
GOOGLE_CLIENT_ID="your-google-client-id"
GOOGLE_CLIENT_SECRET="your-google-client-secret"

# OpenAI - Get from https://platform.openai.com/api-keys
OPENAI_API_KEY="sk-proj-your-openai-api-key"

# Anthropic Claude - Get from https://console.anthropic.com/
ANTHROPIC_API_KEY="sk-ant-api03-your-anthropic-api-key"

# Stripe (for later - leave as placeholder for now)
STRIPE_PUBLISHABLE_KEY="pk_test_your-publishable-key"
STRIPE_SECRET_KEY="sk_test_your-secret-key"
STRIPE_WEBHOOK_SECRET="whsec_your-webhook-secret"

# App Config
NEXT_PUBLIC_APP_URL="http://localhost:3000"

# Law 25 Compliance - Quebec Privacy Law
ORG_LEGAL_NAME="Quebec Teacher Hub"
ORG_LEGAL_ADDRESS="1000 Rue de la Gaucheti√®re O, Montreal, QC H3B 4W5, Canada"
PRIVACY_OFFICER_NAME="Privacy Officer"
PRIVACY_OFFICER_EMAIL="privacy@quebecteacherhub.ca"
PRIVACY_OFFICER_PHONE="+1-514-555-0000"
DATA_RETENTION_DAYS="730"
APP_PUBLIC_URL="http://localhost:3000"

# Job Concurrency Configuration
JOB_POLL_RETRY_AFTER=3
JOB_STALE_MIN=15

# Rate limiting
GEN_RL_PER_MIN=8
GEN_RL_PER_DAY=100

# Personal Data Rate Limiting (Quebec Law 25 Compliance)
PERSONAL_DATA_RL_PER_HOUR=5
PERSONAL_DATA_RL_PER_DAY=10

# Student Data Rate Limiting (COPPA Compliance)
STUDENT_DATA_RL_PER_HOUR=3
STUDENT_DATA_RL_PER_DAY=5

# PDF Generation (fixed font loading)
# GEN_DISABLE_PDF=1
PDF_FONT_PATH=system

# Storage
STORAGE_DIR=.storage
FILES_BASE_URL=http://localhost:3000

# Cache Configuration
CACHE_DEFAULT_TTL=3600
CACHE_MAX_MEMORY_ITEMS=1000

# Redis Configuration (Production)
REDIS_URL="redis://localhost:6379"
ENABLE_REDIS_CACHE="false"  # Set to "true" in production

# Session Cache Configuration
SESSION_CACHE_TTL=86400  # 24 hours
STUDENT_DATA_CACHE_TTL=1800  # 30 minutes (sensitive data)
MATERIAL_CACHE_TTL=3600  # 1 hour

# AI Configuration - V4 Updates
AI_MODEL=gpt-5-turbo  # Primary model
AI_MODEL_FALLBACK=gpt-5-mini  # Fallback model
AI_MODEL_CRITIC=gpt-4o
AI_TIMEOUT_MS=60000
AI_RETRY_MAX=3
AI_RETRY_BASE_MS=300
AI_MAX_OUTPUT_TOKENS=16000
ENABLE_GPT5=true

# Production Quality Gates
QUALITY_MODE=high
QUALITY_MIN_OVERALL=85  # V4 target: 85-95/100
QUALITY_MIN_DIM=4
QUALITY_MAX_PASSES=3
QUALITY_THRESHOLD=85

# Knowledge Enhancement Configuration
MAX_KNOWLEDGE_TOKENS=4000
KNOWLEDGE_RETRIEVAL_TIMEOUT=50
ENABLE_KNOWLEDGE_ENHANCEMENT=true

# Task Processing & Security
TASK_SECRET="your-task-secret-key-here"
EXPORT_RETENTION_DAYS=14

# Port Configuration (production ready)
PORT=3000

# Sentry Error Monitoring (mandatory for school-facing product)
SENTRY_DSN="https://your-dsn@sentry.io/project-id"
NEXT_PUBLIC_SENTRY_DSN="https://your-dsn@sentry.io/project-id"
SENTRY_ORG="quebec-teacher-hub"
SENTRY_PROJECT="quebec-teacher-hub-v4"
SENTRY_AUTH_TOKEN="your-auth-token"

# Structured Logging
LOG_LEVEL="info"
ENABLE_STRUCTURED_LOGGING="true"

# Upstash Redis for Production Rate Limiting
UPSTASH_REDIS_REST_URL="https://your-upstash-redis-url.upstash.io"
UPSTASH_REDIS_REST_TOKEN="your-upstash-token"

# Supabase Storage (Production File Storage)
SUPABASE_SERVICE_ROLE_KEY="your-service-role-key-here"

# Feature Flags - V4
FEATURE_STUDENT_PAGE_V2=true
USE_COMPREHENSIVE_SAE=true
ENABLE_MULTI_FORMAT_EXPORT=true
ENABLE_FRENCH_EXCELLENCE=true
USE_HEROUI_INTERFACE=true  # Updated for v4